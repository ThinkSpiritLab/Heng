# 外部通信协议

## 综述

### 协议目的

1. 承载外部系统的评测需要，提供可靠稳定的评测结果。

2. 验证合法的外部系统，防止缓存攻击和非法请求。

## 组成部分

协议由两部分组成，分别为基于 HTTPS 的短连接协议和基于 WebSocket 的长连接协议。

两种协议的语义基本相同，但是具体细节上有少许差别。具体请看协议内容。

## 协议名词解释

### 客户系统

调用本系统进行自动化评测的系统。

### AccessKey

用于分辨各个客户系统的字符串，对每个客户系统唯一，无需保密。

### SecrectKey

用于认证客户系统身份的字符串。客户系统的请求应当按照协议描述签名。需由客户系统严格保密。

### 评测状态

指一个评测当前情况，具有如下可取值：

- `waitinging` 正在等待（尚未从控制端下发）

- `preparing` 正在准备（评测端正在处理）

- `pending` 正在评测端排队

- `judging` 正在评测（评测正在运行）

- `judged` 评测已结束
