# 下一代评测机

## 总体

### 现有评测机

#### 现有评测机的优点

经过数代改进，现有的评测内核已经比较稳定，支持多种编程语言和SPJ。基本上满足OJ系统的需求。

#### 现有评测机的缺点

部署上与网页后端耦合，导致难以分离部署，难以引入多评测机机制。结果是在评测任务重时会抢占网站后端资源，导致网站陷入不能访问的局面。也难以拓展更高的评测性能。

### 计划做出的改进

#### 多评测机支持

采用 `C/S` 架构， `ws` 协议实现单控多评测机。

#### 与网页后端分离

评测客户端将只与评测控制端保持 `WebSocket` 连接。评测客户端与网页后端通过 `WebSocket` 交换评测指令，通过通过 `WebSocket` 传递题目文件。

同时支持 `HTTPS` 的API

支持同时连接多个客户系统，并对客户系统进行基于身份的权限控制。

保持架构的相对独立，方便分离部署以及架设相关代理。
